{"ast":null,"code":"import _defineProperty from\"/Users/kpgirishbhai/Downloads/react-project/meme-generator/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/kpgirishbhai/Downloads/react-project/meme-generator/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/kpgirishbhai/Downloads/react-project/meme-generator/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";// import html2canvas from \"html2canvas\";\nimport{toJpeg}from\"html-to-image\";import format from\"date-fns/format\";// import memesData from \"../memesData\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Meme(){var _React$useState=React.useState({topText:\"\",bottomText:\"\",randomImg:\"http://i.imgflip.com/1bij.jpg\"}),_React$useState2=_slicedToArray(_React$useState,2),meme=_React$useState2[0],setMeme=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),allMeme=_React$useState4[0],setAllMeme=_React$useState4[1];React.useEffect(function(){return fetch(\"https://api.imgflip.com/get_memes\").then(function(res){return res.json();}).then(function(data){return setAllMeme(data.data.memes);});},[]);function getMemeImage(){var randomNumber=Math.floor(Math.random()*allMeme.length);setMeme(function(prevMeme){return _objectSpread(_objectSpread({},prevMeme),{},{randomImg:allMeme[randomNumber].url,topText:\"\",bottomText:\"\"});});}function handleChange(event){setMeme(function(prevMeme){return _objectSpread(_objectSpread({},prevMeme),{},_defineProperty({},event.target.name,event.target.value));});}var ref=React.useRef(null);var handleDownloadImage=React.useCallback(function(){if(ref.current===null){return;}toJpeg(ref.current,{cacheBust:true}).then(function(dataUrl){var link=document.createElement(\"a\");link.download=\"\".concat(format(new Date(),\"'meme-'HH-mm-ss\"),\".jpg\");link.href=dataUrl;link.click();}).catch(function(err){console.log(err);});},[ref]);return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"meme-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"meme-form-input\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"meme-form-input1\",type:\"text\",placeholder:\"Top Text\",name:\"topText\",value:meme.topText,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:\"meme-form-input2\",type:\"text\",placeholder:\"Bottom Text\",name:\"bottomText\",value:meme.bottomText,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{className:\"meme-form-submit\",onClick:getMemeImage,children:\"Get a new meme image \\uD83D\\uDDBC\"})]}),/*#__PURE__*/_jsxs(\"div\",{ref:ref,className:\"meme\",children:[/*#__PURE__*/_jsx(\"img\",{src:meme.randomImg,className:\"meme-photo\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"meme--text top\",children:meme.topText}),/*#__PURE__*/_jsx(\"h2\",{className:\"meme--text bottom\",children:meme.bottomText})]}),/*#__PURE__*/_jsx(\"button\",{className:\"meme-download-button\",type:\"button\",onClick:handleDownloadImage,children:\"Download Meme \\uD83D\\uDC47\\uD83C\\uDFFB\"})]});}","map":{"version":3,"names":["React","toJpeg","format","jsx","_jsx","jsxs","_jsxs","Meme","_React$useState","useState","topText","bottomText","randomImg","_React$useState2","_slicedToArray","meme","setMeme","_React$useState3","_React$useState4","allMeme","setAllMeme","useEffect","fetch","then","res","json","data","memes","getMemeImage","randomNumber","Math","floor","random","length","prevMeme","_objectSpread","url","handleChange","event","_defineProperty","target","name","value","ref","useRef","handleDownloadImage","useCallback","current","cacheBust","dataUrl","link","document","createElement","download","concat","Date","href","click","catch","err","console","log","children","className","type","placeholder","onChange","onClick","src"],"sources":["/Users/kpgirishbhai/Downloads/react-project/meme-generator/src/components/Meme.js"],"sourcesContent":["import React from \"react\";\n// import html2canvas from \"html2canvas\";\nimport { toJpeg } from \"html-to-image\";\nimport format from \"date-fns/format\";\n// import memesData from \"../memesData\";\n\nexport default function Meme() {\n  const [meme, setMeme] = React.useState({\n    topText: \"\",\n    bottomText: \"\",\n    randomImg: \"http://i.imgflip.com/1bij.jpg\",\n  });\n\n  const [allMeme, setAllMeme] = React.useState([]);\n  React.useEffect(\n    () =>\n      fetch(\"https://api.imgflip.com/get_memes\")\n        .then((res) => res.json())\n        .then((data) => setAllMeme(data.data.memes)),\n    []\n  );\n\n  function getMemeImage() {\n    const randomNumber = Math.floor(Math.random() * allMeme.length);\n    setMeme((prevMeme) => ({\n      ...prevMeme,\n      randomImg: allMeme[randomNumber].url,\n      topText: \"\",\n      bottomText: \"\",\n    }));\n  }\n\n  function handleChange(event) {\n    setMeme((prevMeme) => ({\n      ...prevMeme,\n      [event.target.name]: event.target.value,\n    }));\n  }\n\n  const ref = React.useRef(null);\n\n  const handleDownloadImage = React.useCallback(() => {\n    if (ref.current === null) {\n      return;\n    }\n    toJpeg(ref.current, { cacheBust: true })\n      .then((dataUrl) => {\n        const link = document.createElement(\"a\");\n        link.download = `${format(new Date(), \"'meme-'HH-mm-ss\")}.jpg`;\n        link.href = dataUrl;\n        link.click();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, [ref]);\n\n  return (\n    <main>\n      <div className=\"meme-form\">\n        <div className=\"meme-form-input\">\n          <input\n            className=\"meme-form-input1\"\n            type=\"text\"\n            placeholder=\"Top Text\"\n            name=\"topText\"\n            value={meme.topText}\n            onChange={handleChange}\n          />\n          <input\n            className=\"meme-form-input2\"\n            type=\"text\"\n            placeholder=\"Bottom Text\"\n            name=\"bottomText\"\n            value={meme.bottomText}\n            onChange={handleChange}\n          />\n        </div>\n        <button className=\"meme-form-submit\" onClick={getMemeImage}>\n          Get a new meme image üñº\n        </button>\n      </div>\n      <div ref={ref} className=\"meme\">\n        <img src={meme.randomImg} className=\"meme-photo\" />\n        <h2 className=\"meme--text top\">{meme.topText}</h2>\n        <h2 className=\"meme--text bottom\">{meme.bottomText}</h2>\n      </div>\n      <button\n        className=\"meme-download-button\"\n        type=\"button\"\n        onClick={handleDownloadImage}\n      >\n        Download Meme üëáüèª\n      </button>\n    </main>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}